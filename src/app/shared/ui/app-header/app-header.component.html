<header class="app-header">
  <a class="brand-link" [routerLink]="homePath" aria-label="Datapulse — на главную">
    <img class="brand-icon" src="assets/logo.svg" alt="" />
    <span class="brand">Datapulse</span>
  </a>

  <div class="app-header__profile" *ngIf="userProfile$ | async as profile; else loginTemplate">
    <div class="app-header__user">
      <span class="app-header__name">
        {{ profile.fullName || profile.username || profile.email || profile.keycloakSub }}
      </span>

      <span class="app-header__email" *ngIf="profile.email">
        {{ profile.email }}
      </span>
    </div>

    <div class="app-header__menu">
      <dp-button type="button" variant="secondary" (click)="toggleMenu()">
        Settings
      </dp-button>
      <div class="app-header__dropdown" *ngIf="menuOpen">
        <a
          class="app-header__dropdown-item"
          [routerLink]="APP_PATHS.settingsWorkspaces"
          (click)="closeMenu()"
        >
          Workspaces
        </a>
      </div>
    </div>

    <dp-button
      type="button"
      variant="secondary"
      (click)="logout()"
      [disabled]="isLogoutRedirecting"
    >
      Выйти
    </dp-button>
  </div>
  <ng-template #loginTemplate>
    <div class="app-header__profile">
      <dp-button
        type="button"
        variant="secondary"
        (click)="login()"
        [disabled]="isLoginRedirecting"
      >
        Войти
      </dp-button>
    </div>
  </ng-template>
</header>
