<dp-page-layout [accountId]="accountId$ | async">
  <dp-page-header title="Profile" subtitle="Ваши данные и доступы."></dp-page-header>

  <section class="card" *ngIf="profile$ | async as profile; else loading">
    <div class="profile-grid">
      <div>
        <div class="profile-label">Name</div>
        <div class="profile-value">
          {{ profile.fullName || profile.username || profile.email || profile.keycloakSub }}
        </div>
      </div>
      <div *ngIf="profile.email">
        <div class="profile-label">Email</div>
        <div class="profile-value">{{ profile.email }}</div>
      </div>
      <div *ngIf="profile.username">
        <div class="profile-label">Username</div>
        <div class="profile-value">{{ profile.username }}</div>
      </div>
      <div>
        <div class="profile-label">ID</div>
        <div class="profile-value mono">{{ profile.keycloakSub }}</div>
      </div>
    </div>
  </section>

  <ng-template #loading>
    <dp-loading-state label="Loading profile"></dp-loading-state>
  </ng-template>
</dp-page-layout>
