<dp-table *ngIf="connections.length > 0; else empty">
  <table class="table">
    <thead>
      <tr>
        <th>Маркетплейс</th>
        <th>Активно</th>
        <th>Статус синхронизации</th>
        <th>Последняя синхронизация</th>
        <th>Masked credentials</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let connection of connections">
        <td>{{ connection.marketplace }}</td>
        <td>
          <span class="status-pill" [class.status-pill--active]="connection.active" [class.status-pill--inactive]="!connection.active">
            {{ connection.active ? "Active" : "Inactive" }}
          </span>
        </td>
        <td>{{ connection.lastSyncStatus || "—" }}</td>
        <td>{{ connection.lastSyncAt || "—" }}</td>
        <td>{{ connection.maskedCredentials || "—" }}</td>
        <td class="actions">
          <details class="action-menu" #menu>
            <summary aria-label="Actions">⋯</summary>
            <div class="action-menu__panel">
              <button
                type="button"
                class="action-menu__item"
                (click)="replaceCredentials.emit(connection); menu.open = false"
              >
                Replace credentials
              </button>
              <button
                type="button"
                class="action-menu__item"
                (click)="toggleActive.emit(connection); menu.open = false"
              >
                {{ connection.active ? "Deactivate" : "Activate" }}
              </button>
              <button
                type="button"
                class="action-menu__item is-danger"
                (click)="deleteConnection.emit(connection); menu.open = false"
              >
                Delete
              </button>
            </div>
          </details>
        </td>
      </tr>
    </tbody>
  </table>
</dp-table>

<ng-template #empty>
  <div class="empty">Подключений пока нет.</div>
</ng-template>
