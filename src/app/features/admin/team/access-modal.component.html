<div class="backdrop" *ngIf="visible">
  <div class="modal">
    <h3>Доступы оператора</h3>
    <p class="muted" *ngIf="member">{{ member.email }}</p>

    <form class="section" [formGroup]="form">
      <label>Область доступа</label>
      <select formControlName="accessScope">
        <option *ngFor="let scope of accessScopes" [value]="scope">{{ scope }}</option>
      </select>
    </form>

    <div class="section">
      <label>Подключения</label>
      <div class="connections">
        <label class="checkbox" *ngFor="let connection of connections">
          <input
            type="checkbox"
            [checked]="form.value.connectionIds?.includes(connection.id)"
            #connectionToggle
            (change)="toggleConnection(connection.id, connectionToggle.checked)"
          />
          {{ connection.name }} ({{ connection.marketplace }})
        </label>
      </div>
    </div>

    <div class="actions">
      <button type="button" (click)="close.emit()">Отмена</button>
      <button type="button" class="primary" (click)="submit()">Сохранить</button>
    </div>
  </div>
</div>
